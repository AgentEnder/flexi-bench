"use strict";(self.webpackChunk_flexi_bench_docs_site=self.webpackChunk_flexi_bench_docs_site||[]).push([[6871],{7518:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=n(2540),o=n(3023);const a={id:"custom-reporter",title:"Custom Reporter",sidebar_label:"Custom Reporter",description:"Creating custom reporters using the Result type with metadata fields like iterations, totalDuration, benchmarkName, and variationName.",hide_title:!0},s="Custom Reporter",i={id:"examples/custom-reporter",title:"Custom Reporter",description:"Creating custom reporters using the Result type with metadata fields like iterations, totalDuration, benchmarkName, and variationName.",source:"@site/docs/examples/custom-reporter.md",sourceDirName:"examples",slug:"/examples/custom-reporter",permalink:"/flexi-bench/examples/custom-reporter",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"custom-reporter",title:"Custom Reporter",sidebar_label:"Custom Reporter",description:"Creating custom reporters using the Result type with metadata fields like iterations, totalDuration, benchmarkName, and variationName.",hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Different Implementations",permalink:"/flexi-bench/examples/different-implementations"},next:{title:"Failing Actions",permalink:"/flexi-bench/examples/failing-actions"}},l={},c=[];function m(e){const t={code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"custom-reporter",children:"Custom Reporter"}),"\n",(0,r.jsx)(t.p,{children:"Creating custom reporters using the Result type with metadata fields like iterations, totalDuration, benchmarkName, and variationName."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="Custom Reporter" showLineNumbers',children:"\n/**\n * Example: Custom Reporter with Result Type\n *\n * This example shows how to create a custom reporter that uses the Result type,\n * including the new metadata fields (iterations, totalDuration, benchmarkName, variationName).\n */\n\nimport {\n  Suite,\n  Benchmark,\n  Variation,\n  SuiteReporter,\n  Result,\n  MarkdownSuiteReporter,\n} from '../src/index';\n\n/**\n * A custom reporter that outputs a summary with statistics\n * and demonstrates accessing Result metadata\n */\nclass SummaryReporter implements SuiteReporter {\n  report(results: Record<string, Result[]>): void {\n    console.log('\\n========== BENCHMARK SUMMARY ==========\\n');\n\n    let totalBenchmarks = 0;\n    let totalVariations = 0;\n    let totalIterations = 0;\n\n    for (const [benchmarkName, benchmarkResults] of Object.entries(results)) {\n      totalBenchmarks++;\n      console.log(`\ud83d\udcca ${benchmarkName}`);\n\n      for (const result of benchmarkResults) {\n        totalVariations++;\n\n        // Access Result metadata fields\n        const iterations = result.iterations ?? 'N/A';\n        const totalDuration = result.totalDuration\n          ? `${result.totalDuration.toFixed(2)}ms`\n          : 'N/A';\n        const benchmarkLabel = result.benchmarkName ?? benchmarkName;\n        const variationLabel = result.variationName ?? result.label;\n\n        if (typeof iterations === 'number') {\n          totalIterations += iterations;\n        }\n\n        console.log(`  \u2514\u2500 ${variationLabel}`);\n        console.log(`     \u251c\u2500 Average: ${result.average.toFixed(2)}ms`);\n        console.log(`     \u251c\u2500 P95: ${result.p95.toFixed(2)}ms`);\n        console.log(`     \u251c\u2500 Iterations: ${iterations}`);\n        console.log(`     \u2514\u2500 Total Duration: ${totalDuration}`);\n\n        // Check for failures\n        if (result.failed) {\n          console.log(\n            `     \u26a0\ufe0f  FAILED (${((result.failureRate ?? 0) * 100).toFixed(1)}% failure rate)`,\n          );\n        }\n      }\n      console.log('');\n    }\n\n    console.log('========== STATISTICS ==========');\n    console.log(`Total Benchmarks: ${totalBenchmarks}`);\n    console.log(`Total Variations: ${totalVariations}`);\n    console.log(`Total Iterations: ${totalIterations}`);\n    console.log('================================\\n');\n  }\n}\n\n/**\n * A custom reporter with lifecycle hooks\n */\nclass LifecycleReporter implements SuiteReporter {\n  onSuiteStart(suiteName: string): void {\n    console.log(`\\n\ud83d\ude80 Starting suite: ${suiteName}`);\n  }\n\n  onBenchmarkStart(benchmarkName: string): void {\n    console.log(`  \ud83c\udfc3 Starting benchmark: ${benchmarkName}`);\n  }\n\n  onBenchmarkEnd(benchmarkName: string, results: Result[]): void {\n    const avgTime =\n      results.reduce((sum, r) => sum + r.average, 0) / results.length;\n    console.log(\n      `  \u2705 Completed benchmark: ${benchmarkName} (avg: ${avgTime.toFixed(2)}ms)`,\n    );\n  }\n\n  report(results: Record<string, Result[]>): void {\n    console.log('\\n\ud83d\udccb Final Report:');\n    console.log(`  ${Object.keys(results).length} benchmarks completed`);\n  }\n}\n\n(async () => {\n  const results = await new Suite('Custom Reporter Demo')\n    .withReporter(\n      // Use CompositeReporter to run multiple reporters\n      {\n        report: (results: Record<string, Result[]>) => {\n          // Run both custom reporters\n          new SummaryReporter().report(results);\n          new LifecycleReporter().report(results);\n        },\n        onSuiteStart: (suiteName: string) => {\n          new LifecycleReporter().onSuiteStart?.(suiteName);\n        },\n        onBenchmarkStart: (benchmarkName: string) => {\n          new LifecycleReporter().onBenchmarkStart?.(benchmarkName);\n        },\n        onBenchmarkEnd: (benchmarkName: string, results: Result[]) => {\n          new LifecycleReporter().onBenchmarkEnd?.(benchmarkName, results);\n        },\n      },\n    )\n    .addBenchmark(\n      new Benchmark('Fast Operation').withIterations(5).withAction(() => {\n        // Quick operation\n        Math.sqrt(12345);\n      }),\n    )\n    .addBenchmark(\n      new Benchmark('Slow Operation')\n        .withIterations(5)\n        .withAction(() => {\n          // Slower operation\n          for (let i = 0; i < 1000000; i++) {\n            Math.sqrt(i);\n          }\n        })\n        .withVariations([\n          new Variation('Variation A'),\n          new Variation('Variation B'),\n        ]),\n    )\n    .run();\n\n  console.log('\\nKey points demonstrated:');\n  console.log('- Result type is now exported and includes metadata');\n  console.log(\n    '- Custom reporters can access iterations, totalDuration, benchmarkName, variationName',\n  );\n  console.log(\n    '- SuiteReporter has optional lifecycle hooks: onSuiteStart, onBenchmarkStart, onBenchmarkEnd',\n  );\n})();\n\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},3023:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>i});var r=n(3696);const o={},a=r.createContext(o);function s(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);