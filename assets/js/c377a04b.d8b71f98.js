"use strict";(self.webpackChunk_flexi_bench_docs_site=self.webpackChunk_flexi_bench_docs_site||[]).push([[3361],{7445:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var i=r(2540),t=r(3023);const a={id:"index",title:"Home",hide_title:!0,slug:"/",sidebar_position:1},o="FlexiBench",s={id:"index",title:"Home",description:"FlexiBench is a flexible benchmarking library for JavaScript and TypeScript. It is designed to be simple to use, but also powerful and flexible. It is inspired by common testing framework APIs, and aims to provide a similar experience for benchmarking.",source:"@site/docs/index.md",sourceDirName:".",slug:"/",permalink:"/flexi-bench/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"index",title:"Home",hide_title:!0,slug:"/",sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Changelog",permalink:"/flexi-bench/changelog"}},c={},l=[{value:"Installation",id:"installation",level:2},{value:"Features",id:"features",level:2},{value:"Usage",id:"usage",level:2},{value:"Runner API",id:"runner-api",level:3},{value:"Basic Benchmarks",id:"basic-benchmarks",level:3},{value:"Setup and Teardown",id:"setup-and-teardown",level:4},{value:"Understanding Actions",id:"understanding-actions",level:4},{value:"Callbacks",id:"callbacks",level:5},{value:"Commands",id:"commands",level:5},{value:"Suites",id:"suites",level:3},{value:"Variations",id:"variations",level:3},{value:"Variation Context",id:"variation-context",level:4},{value:"Reporters",id:"reporters",level:2},{value:"Console Reporters",id:"console-reporters",level:3},{value:"Markdown Reporters",id:"markdown-reporters",level:3},{value:"Automatic Comparison Tables",id:"automatic-comparison-tables",level:4},{value:"JSON Reporter",id:"json-reporter",level:3},{value:"Composite Reporter",id:"composite-reporter",level:3},{value:"Custom Reporters",id:"custom-reporters",level:3},{value:"Result Type",id:"result-type",level:2},{value:"Cookbook",id:"cookbook",level:2},{value:"Benchmarking Multiple Implementations",id:"benchmarking-multiple-implementations",level:3},{value:"Examples",id:"examples",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"flexibench",children:"FlexiBench"}),"\n",(0,i.jsx)(n.p,{children:"FlexiBench is a flexible benchmarking library for JavaScript and TypeScript. It is designed to be simple to use, but also powerful and flexible. It is inspired by common testing framework APIs, and aims to provide a similar experience for benchmarking."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev flexi-bench\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn add --dev flexi-bench\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm add --save-dev flexi-bench\n"})}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#variations",children:"Variations"}),": Run the same benchmark with different configurations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#setup-and-teardown",children:"Setup and Teardown"}),": Run setup and teardown code before and after the benchmark."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#commands",children:"Commands"}),": Run simple commands as benchmarks."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.h3,{id:"runner-api",children:"Runner API"}),"\n",(0,i.jsx)(n.p,{children:"The runner API is the simplest way to run benchmarks. It allows running a single benchmark or a suite of benchmarks."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { suite, benchmark, setup, teardown } = require('flexi-bench');\n\n// A `suite` call at the top level will be evaluated as a whole suite.\nsuite('My Suite', () => {\n  // Nested `benchmark` calls will not be evaluated until the parent `suite` is evaluated.\n  benchmark('My Benchmark', (b) => {\n    setup(() => {\n      // some setup to run before the entire benchmark\n    });\n\n    teardown(() => {\n      // some teardown to run after the entire benchmark\n    });\n\n    b.withAction(() => {\n      // some action to benchmark\n    });\n  });\n});\n\n// Top-level `benchmark` calls will be evaluated immediately.\nbenchmark('My Benchmark', (b) => {\n  b.withIterations(10).withAction(() => {\n    // some action to benchmark\n  });\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Within the callbacks for each ",(0,i.jsx)(n.code,{children:"suite"})," or ",(0,i.jsx)(n.code,{children:"benchmark"})," you can utilize the builder API for full customization of the benchmark. Variations can either be added directly via the builder API, or by nesting a ",(0,i.jsx)(n.code,{children:"variation"})," call within the ",(0,i.jsx)(n.code,{children:"benchmark"})," call, or at the ",(0,i.jsx)(n.code,{children:"suite"})," level to apply the variation to all benchmarks in the suite."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { suite, benchmark, variation } = require('flexi-bench');\n\nsuite('My Suite', () => {\n  benchmark('My Benchmark', (b) => {\n    b.withIterations(10).withAction(() => {\n      // some action to benchmark\n    });\n\n    variation('with NO_DAEMON', (v) =>\n      v.withEnvironmentVariable('NO_DAEMON', 'true'),\n    );\n  });\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basic-benchmarks",children:"Basic Benchmarks"}),"\n",(0,i.jsx)(n.p,{children:"More detailed documentation will come soon. For now, here is a simple example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: () => {\n    // some action to benchmark\n  },\n});\n\nawait benchmark.run();\n"})}),"\n",(0,i.jsx)(n.p,{children:"Most options for the benchmark can also be provided by a builder API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark')\n  .withIterations(10)\n  .withSetup(() => {\n    // some setup to run before the entire benchmark\n  })\n  .withAction(() => {\n    // some action to benchmark\n  });\n"})}),"\n",(0,i.jsx)(n.h4,{id:"setup-and-teardown",children:"Setup and Teardown"}),"\n",(0,i.jsxs)(n.p,{children:["Some benchmarks will require some work before the benchmark to setup the environment, and some work after the benchmark to clean up. This can be done with the ",(0,i.jsx)(n.code,{children:"setup"}),"/",(0,i.jsx)(n.code,{children:"setupEach"})," and ",(0,i.jsx)(n.code,{children:"teardown"}),"/",(0,i.jsx)(n.code,{children:"teardownEach"})," methods:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"benchmark('My Benchmark', (b) => {\n  setup(() => {\n    // some setup to run before the entire benchmark\n  });\n\n  setupEach(() => {\n    // some setup that is ran before each iteration of the benchmark\n  });\n\n  teardown(() => {\n    // some teardown to run after the entire benchmark\n  });\n\n  teardownEach(() => {\n    // some teardown that is ran after each iteration of the benchmark\n  });\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"These can also be set using the builder API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark')\n  .withIterations(10)\n  .withSetup(() => {\n    // some setup to run before the entire benchmark\n  })\n  .withSetupEach(() => {\n    // some setup that is ran before each iteration of the benchmark\n  })\n  .withTeardown(() => {\n    // some teardown to run after the entire benchmark\n  })\n  .withTeardownEach(() => {\n    // some teardown that is ran after each iteration of the benchmark\n  });\n"})}),"\n",(0,i.jsx)(n.h4,{id:"understanding-actions",children:"Understanding Actions"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"action"})," for a benchmark provides the actual event that is being benchmarked. FlexiBench can currently benchmark 2 types of actions:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Callbacks"}),"\n",(0,i.jsx)(n.li,{children:"Commands"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["An ",(0,i.jsx)(n.code,{children:"action"})," can be specified via the ",(0,i.jsx)(n.code,{children:"action"})," property of the ",(0,i.jsx)(n.code,{children:"benchmark"})," or ",(0,i.jsx)(n.code,{children:"variation"})," constructor, or via ",(0,i.jsx)(n.code,{children:".withAction"})," on the builder API. Actions specified on the running ",(0,i.jsx)(n.code,{children:"variation"})," will override the action specified on the parent ",(0,i.jsx)(n.code,{children:"benchmark"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, the following code will run the ",(0,i.jsx)(n.code,{children:"action"})," specified on the ",(0,i.jsx)(n.code,{children:"variation"}),", and not the ",(0,i.jsx)(n.code,{children:"action"})," specified on the ",(0,i.jsx)(n.code,{children:"benchmark"}),". This would result in the output ",(0,i.jsx)(n.code,{children:"bar"})," being printed 10 times, instead of ",(0,i.jsx)(n.code,{children:"foo"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: () => {\n    console.log('foo');\n  },\n}).withVariation('with NO_DAEMON', (v) =>\n  v.withAction(() => {\n    console.log('bar');\n  }),\n);\n"})}),"\n",(0,i.jsx)(n.h5,{id:"callbacks",children:"Callbacks"}),"\n",(0,i.jsxs)(n.p,{children:["If the process you are benchmarking is available as a JavaScript function, you can pass it directly to the ",(0,i.jsx)(n.code,{children:"action"})," property or execute it within the ",(0,i.jsx)(n.code,{children:"action"})," callback. For example, if you are benchmarking a function that sorts an array, you can do the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { benchmark, setup } = require('flexi-bench');\n\nbenchmark('My Benchmark', (b) => {\n  let array;\n\n  setup(() => {\n    array = Array.from({ length: 1000 }, () => Math.random());\n  });\n\n  b.withIterations(10).withAction(() => {\n    array.sort();\n  });\n});\n"})}),"\n",(0,i.jsx)(n.h5,{id:"commands",children:"Commands"}),"\n",(0,i.jsxs)(n.p,{children:["If the process you are benchmarking is not available as a JavaScript function, you can run it as a command. This can be done by passing a string to the ",(0,i.jsx)(n.code,{children:"action"})," property. For example, if you are benchmarking the runtime of a cli command, you can do the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: 'echo \"Hello, World!\"',\n});\n\nawait benchmark.run();\n"})}),"\n",(0,i.jsxs)(n.p,{children:["While it would be possible to write an action that runs a command using ",(0,i.jsx)(n.code,{children:"child_process"})," methods, using the syntactic sugar provided by flexi-bench is more convenient and provides a few benefits."]}),"\n",(0,i.jsxs)(n.p,{children:["Utilizing the syntactic sugar also means that flexi-bench is aware that you are indeed running a command. This sounds obvious, but opens up some neat possibilities since we are running the command from within flexi-bench. For example, we can add variations based on tailoring CLI options which would not be possible if you ran your command directly using ",(0,i.jsx)(n.code,{children:"child_process"})," methods on your own."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: 'echo',\n})\n  .withVariation('with argument', (v) => v.withArgument('Hello, Earth!'))\n  .withVariation('with argument', (v) => v.withArgument('Hello, Mars!'));\n\nawait benchmark.run();\n"})}),"\n",(0,i.jsx)(n.p,{children:"When running commands via the syntactic sugar, the command is invoked with a function similar to below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const child = spawn(action, variation.cliArgs, {\n  shell: true,\n  windowsHide: true,\n});\nchild.on('exit', (code) => {\n  if (code === 0) {\n    resolve();\n  } else {\n    reject(`Action failed with code ${code}`);\n  }\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"For more information on the simple command API, see the example: ./examples/simple-command.ts"}),"\n",(0,i.jsx)(n.h3,{id:"suites",children:"Suites"}),"\n",(0,i.jsx)(n.p,{children:"A suite is a collection of benchmarks that can be run together:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark, Suite } = require('flexi-bench');\n\nconst suite = new Suite('My Suite')\n  .addBenchmark(\n    new Benchmark('My Benchmark 1', {\n      iterations: 10,\n      action: () => {\n        // some action to benchmark\n      },\n    }),\n  )\n  .addBenchmark(\n    new Benchmark('My Benchmark 2', {\n      iterations: 10,\n      action: () => {\n        // some action to benchmark\n      },\n    }),\n  );\n"})}),"\n",(0,i.jsx)(n.p,{children:"Suites can also be created using the runner API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { suite, benchmark } = require('flexi-bench');\n\nsuite('My Suite', () => {\n  benchmark('My Benchmark 1', (b) => {\n    b.withIterations(10).withAction(() => {\n      // some action to benchmark\n    });\n  });\n\n  benchmark('My Benchmark 2', (b) => {\n    b.withIterations(10).withAction(() => {\n      // some action to benchmark\n    });\n  });\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"variations",children:"Variations"}),"\n",(0,i.jsx)(n.p,{children:"Variations allow running the same benchmark with different configurations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark, Variation } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: () => {\n    // some action to benchmark\n  },\n}).withVariation('with NO_DAEMON', (v) =>\n  v.withEnvironmentVariable('NO_DAEMON', 'true'),\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"Variations can do most things that the main benchmark can do, including having their own setup and teardown functions, or even a custom action."}),"\n",(0,i.jsxs)(n.p,{children:["Some helper functions are provided on the ",(0,i.jsx)(n.code,{children:"Variation"})," class to make it easier to set up variations:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark, Variation } = require('flexi-bench');\n\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: () => {\n    // some action to benchmark\n  },\n}).withVariations(\n  // Adds 4 variations with all possible combinations of the given environment variables\n  Variation.FromEnvironmentVariables([\n    ['NO_DAEMON', ['true', 'false']],\n    ['OTHER_VAR', ['value1', 'value2']],\n  ]),\n);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"variation-context",children:"Variation Context"}),"\n",(0,i.jsx)(n.p,{children:"For more complex scenarios where you need to pass objects or data directly to the benchmark action, use the context API instead of environment variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark, Variation } = require('flexi-bench');\n\n// Define different implementations\nconst loopProcessor = {\n  process: (data) => {\n    /* loop */\n  },\n};\nconst reduceProcessor = {\n  process: (data) => {\n    /* reduce */\n  },\n};\n\n// Use FromContexts for clean, declarative variation setup\nconst benchmark = new Benchmark('Process Data')\n  .withIterations(100)\n  .withVariations(\n    Variation.FromContexts('processor', [\n      ['loop', loopProcessor],\n      ['reduce', reduceProcessor],\n    ]),\n  )\n  .withAction((variation) => {\n    // Use get() to retrieve context data\n    const processor = variation.get('processor');\n    processor.process(data);\n  });\n"})}),"\n",(0,i.jsx)(n.p,{children:"The context API provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Variation.FromContexts(key, [[name, value], ...])"})," - Create variations with context (cleanest API)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"withContext(key, value)"})," - Attach custom data to a single variation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"get(key)"})," - Retrieve context data (returns ",(0,i.jsx)(n.code,{children:"T | undefined"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"getOrDefault(key, defaultValue)"})," - Retrieve with fallback value"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"FromContexts"})," when creating multiple variations with the same context key - it's cleaner and more concise than individual ",(0,i.jsx)(n.code,{children:"withVariation"})," calls with ",(0,i.jsx)(n.code,{children:"withContext"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Variations can also be added to suites. Variations added to a suite will be applied to all benchmarks in the suite."}),"\n",(0,i.jsx)(n.p,{children:"For example, the below suite would run each benchmark with 'NO_DAEMON' set to true, and then with 'OTHER_VAR' set to 'value1' for a total of 4 benchmark runs in the suite:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { Benchmark, Suite, Variation } = require('flexi-bench');\n\nconst suite = new Suite('My Suite')\n  .addBenchmark(\n    new Benchmark('My Benchmark 1', {\n      iterations: 10,\n      action: () => {\n        // some action to benchmark\n      },\n    }),\n  )\n  .addBenchmark(\n    new Benchmark('My Benchmark 2', {\n      iterations: 10,\n      action: () => {\n        // some action to benchmark\n      },\n    }),\n  )\n  .withVariation('with NO_DAEMON', (v) =>\n    v.withEnvironmentVariable('NO_DAEMON', 'true'),\n  )\n  .withVariation('with OTHER_VAR', (v) =>\n    v.withEnvironmentVariable('OTHER_VAR', 'value1'),\n  );\n"})}),"\n",(0,i.jsx)(n.h2,{id:"reporters",children:"Reporters"}),"\n",(0,i.jsx)(n.p,{children:"Reporters control how benchmark results are output. FlexiBench provides several built-in reporters:"}),"\n",(0,i.jsx)(n.h3,{id:"console-reporters",children:"Console Reporters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const {\n  Benchmark,\n  BenchmarkConsoleReporter,\n  SuiteConsoleReporter,\n} = require('flexi-bench');\n\n// For single benchmarks\nconst benchmark = new Benchmark('My Benchmark', {\n  iterations: 10,\n  action: () => {\n    /* ... */\n  },\n  reporter: new BenchmarkConsoleReporter(),\n});\n\n// For suites\nconst suite = new Suite('My Suite')\n  .withReporter(new SuiteConsoleReporter())\n  .addBenchmark(benchmark);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Both console reporters support the ",(0,i.jsx)(n.code,{children:"NO_COLOR"})," environment variable for disabling colors:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"NO_COLOR=1 node my-benchmark.js\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or explicitly via options:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"new SuiteConsoleReporter({ noColor: true });\nnew BenchmarkConsoleReporter({ noColor: true });\n"})}),"\n",(0,i.jsx)(n.h3,{id:"markdown-reporters",children:"Markdown Reporters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const {\n  MarkdownBenchmarkReporter,\n  MarkdownSuiteReporter,\n} = require('flexi-bench');\n\n// For single benchmark output\nconst benchmarkReporter = new MarkdownBenchmarkReporter({\n  outputFile: 'results.md',\n  fields: ['min', 'average', 'p95', 'max'],\n  append: true, // Set to true to avoid overwriting when running multiple benchmarks\n});\n\n// For suite-level output (recommended)\nconst suiteReporter = new MarkdownSuiteReporter({\n  outputFile: 'results.md',\n  title: 'Benchmark Results',\n  fields: ['min', 'average', 'p95', 'max', 'iterations'],\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"automatic-comparison-tables",children:"Automatic Comparison Tables"}),"\n",(0,i.jsxs)(n.p,{children:["When a benchmark has multiple variations, both ",(0,i.jsx)(n.code,{children:"MarkdownBenchmarkReporter"})," and ",(0,i.jsx)(n.code,{children:"MarkdownSuiteReporter"})," automatically generate a comparison table showing:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Average time for each variation"}),"\n",(0,i.jsx)(n.li,{children:"Percentage difference vs the fastest variation"}),"\n",(0,i.jsx)(n.li,{children:'Multiplier (e.g., "2.5x" slower)'}),"\n",(0,i.jsx)(n.li,{children:"Trophy emoji (\ud83c\udfc6) marking the fastest variation"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This makes it easy to see which implementation performs best at a glance."}),"\n",(0,i.jsx)(n.h3,{id:"json-reporter",children:"JSON Reporter"}),"\n",(0,i.jsx)(n.p,{children:"For CI/CD integration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { JsonSuiteReporter } = require('flexi-bench');\n\nconst reporter = new JsonSuiteReporter({\n  outputFile: 'results.json',\n  pretty: true,\n  includeMetadata: true, // Includes timestamp, platform, node version\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"composite-reporter",children:"Composite Reporter"}),"\n",(0,i.jsx)(n.p,{children:"Use multiple reporters simultaneously:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const {\n  CompositeReporter,\n  SuiteConsoleReporter,\n  MarkdownSuiteReporter,\n  JsonSuiteReporter,\n} = require('flexi-bench');\n\nconst suite = new Suite('My Suite').withReporter(\n  new CompositeReporter([\n    new SuiteConsoleReporter(),\n    new MarkdownSuiteReporter({ outputFile: 'results.md' }),\n    new JsonSuiteReporter({ outputFile: 'results.json' }),\n  ]),\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-reporters",children:"Custom Reporters"}),"\n",(0,i.jsxs)(n.p,{children:["Create custom reporters by implementing the ",(0,i.jsx)(n.code,{children:"SuiteReporter"})," interface:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { SuiteReporter, Result } from 'flexi-bench';\n\nclass MyCustomReporter implements SuiteReporter {\n  // Optional lifecycle hooks\n  onSuiteStart?(suiteName: string): void {\n    console.log(`Starting suite: ${suiteName}`);\n  }\n\n  onBenchmarkStart?(benchmarkName: string): void {\n    console.log(`Running: ${benchmarkName}`);\n  }\n\n  onBenchmarkEnd?(benchmarkName: string, results: Result[]): void {\n    console.log(`Completed: ${benchmarkName}`);\n  }\n\n  // Required: called after all benchmarks complete\n  report(results: Record<string, Result[]>): void {\n    // Process results here\n    for (const [name, result] of Object.entries(results)) {\n      console.log(`${name}: ${result[0].average}ms average`);\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"result-type",children:"Result Type"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Result"})," type contains comprehensive information about benchmark runs:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface Result {\n  // Basic metrics\n  label: string; // Name of benchmark or variation\n  min: number; // Minimum duration (ms)\n  max: number; // Maximum duration (ms)\n  average: number; // Average duration (ms)\n  p95: number; // 95th percentile duration (ms)\n  raw: (number | Error)[]; // Raw durations/errors\n\n  // Failure information\n  failed?: boolean; // Whether any iteration failed\n  failureRate?: number; // Rate of failures (0-1)\n\n  // Metadata (useful for custom reporters)\n  iterations?: number; // Number of iterations run\n  totalDuration?: number; // Total wall-clock time (ms)\n  benchmarkName?: string; // Name of parent benchmark\n  variationName?: string; // Name of variation\n\n  // Subresults from performance observer\n  subresults?: Result[];\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"The Result type is exported from the main package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Result } from 'flexi-bench';\n"})}),"\n",(0,i.jsx)(n.h2,{id:"cookbook",children:"Cookbook"}),"\n",(0,i.jsx)(n.h3,{id:"benchmarking-multiple-implementations",children:"Benchmarking Multiple Implementations"}),"\n",(0,i.jsx)(n.p,{children:"Compare different implementations of the same interface:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const {\n  Suite,\n  Benchmark,\n  Variation,\n  MarkdownSuiteReporter,\n} = require('flexi-bench');\n\n// Define your implementations\nconst implementations = {\n  loop: (data) => {\n    /* loop implementation */\n  },\n  reduce: (data) => {\n    /* reduce implementation */\n  },\n};\n\nconst suite = new Suite('Implementation Comparison')\n  .withReporter(new MarkdownSuiteReporter({ outputFile: 'results.md' }))\n  .addBenchmark(\n    new Benchmark('Process Data')\n      .withIterations(100)\n      // Create variations with context - no environment variables needed!\n      .withVariations(\n        Variation.FromContexts('impl', [\n          ['loop', implementations.loop],\n          ['reduce', implementations.reduce],\n        ]),\n      )\n      .withAction((variation) => {\n        // Retrieve the implementation directly from context\n        const impl = variation.get('impl');\n        const data = [\n          /* test data */\n        ];\n        impl(data);\n      }),\n  );\n"})}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:"See examples folder."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/benchmark.ts"})," - Full benchmark suite with environment variable variations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/performance-observer.ts"})," - Using PerformanceObserver API"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/simple-command.ts"})," - Benchmarking CLI commands"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/multiple-reporters.ts"})," - Using CompositeReporter for multiple outputs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/custom-reporter.ts"})," - Creating custom reporters with Result type"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/cookbook-different-implementations.ts"})," - Comparing implementations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/no-color-support.ts"})," - Disabling colors in CI environments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/markdown-reporter-append.ts"})," - Using append mode for MarkdownReporter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./examples/markdown-comparison.ts"})," - Demonstrates automatic comparison tables with variations"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3023:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>s});var i=r(3696);const t={},a=i.createContext(t);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);